<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Поиск туров</title>
    <link href="../static/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link th:href="@{/css/bootstrap.min.css}" rel="stylesheet" id="bootstrap-css2">
    <script src="../static/js/jquery-3.3.1.min.js"></script>
    <script src="/js/jquery-3.3.1.min.js"></script>
    <script src="../static/js/bootstrap.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <link href="../static/css/avia.css" rel="stylesheet">
    <link href="/css/avia.css" rel="stylesheet">
    <script src="../static/js/avia.js"></script>
    <script src="/js/avia.js"></script>
    <!-- Calendar http://www.daterangepicker.com/ -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />
    <!-- -->
    <style>
        .navbar {
            margin-bottom: 0;
            border-radius: 0;
        }
    </style>
</head>
<body id="AviaBody">

<nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
    <div class="container">
        <a class="navbar-brand" href="#" style="padding-right: 5vh">TourSearch</a>

        <div class="collapse navbar-collapse" id="navbarsExample07">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="">Авиатуры <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/bus">Автобусные туры</a>
                </li>
            </ul>
            <ul class="navbar-nav navbar-right">
                <li class="nav-item">
                    <a class="nav-link" href="#" th:text="${session.user_name}"></a>
                    <input id="userId" type="hidden" th:value="${session.user.getId()}">
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/logout">
                        <svg style="width:24px;height:24px" viewBox="0 0 24 24">
                            <path id="logout-image" fill="#939C99"
                                  d="M17,17.25V14H10V10H17V6.75L22.25,12L17,17.25M13,2A2,2 0 0,1 15,4V8H13V4H4V20H13V16H15V20A2,2 0 0,1 13,22H4A2,2 0 0,1 2,20V4A2,2 0 0,1 4,2H13Z"/>
                        </svg>
                    </a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<div class="container" id="input-form-container" style="width: 50vw; margin-top: 80px;">
    <div class="card" style="margin-top: 20px; padding: 20px;">
        <form>
            <div class="form-row">
                <div class="form-group col-md-4">
                    <label for="inputCountry">Страна</label>
                    <select class="form-control" id="inputCountry">
                        <option name="country-eg">Египет</option>
                        <option name="country-tr">Турция</option>
                        <option name="country-gr">Греция</option>
                    </select>
                </div>
                <div class="form-group col-md-4">
                    <label for="inputDates">Дата заезда</label>
                    <input type="text" class="form-control" id="inputDates" name="date_range">
                    <script>$(function() {init_calendar();});</script>
                </div>
                <div class="form-group col-md-4">
                    <label>Ночей</label>
                    <div>
                        <div class="col-form-label pr-md-2 float-left">От</div>
                        <input class="form-control col-md-4 float-left" id="minNights" type="number" name="min-nights" value="5"
                               onchange="restrictMaxNightsInput()">
                        <div class="col-form-label px-md-2 float-left">до</div>
                        <input class="form-control col-md-4 float-left" id="maxNights" type="number" name="max-nights" value="7">
                    </div>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-md-2">
                    <label for="inputAdults">Взрослых</label>
                    <select class="form-control" id="inputAdults">
                        <option>1</option>
                        <option selected>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5</option>
                        <option>6</option>
                    </select>
                </div>
                <div class="form-group col-md-2">
                    <label for="inputChildren">Детей</label>
                    <select class="form-control" id="inputChildren">
                        <option>0</option>
                        <option>1</option>
                        <option>2</option>
                    </select>
                </div>
                <div class="form-group col-md-4">
                    <label for="inputMeals">Питание</label>
                    <select class="form-control" id="inputMeals">
                        <option name="meal-ro">Без питания</option>
                        <option name="meal-bb">Только завтрак</option>
                        <option name="meal-hb" selected>Завтрак и ужин</option>
                        <option name="meal-fb">Завтрак, обед и ужин</option>
                        <option name="meal-ai">Все включено</option>
                    </select>
                </div>
                <div class="form-group col-md-4">
                    <label for="inputMaxPrice">Максимальная цена, грн</label>
                    <input class="form-control" id="inputMaxPrice" type="number" name="max-price" value="25800">
                </div>
            </div>
            <div class="form-row">
                <div class="col-md-6 float-left">
                    <p class="btn btn-dark" id="monitoring-button" data-toggle="modal" data-target="#monitoringModal"
                       style="display: none;">Мониторинг</p>
                </div>
                <div class="col-md-6">
                    <p class="btn btn-dark" id="search-button" style="float: right" onclick="loadTours()">Искать</p>
                    <p id="search-label" style="display: none;float: right;  margin-right: 10px; margin-top: 7px;">Идет поиск...</p>
                </div>
            </div>
        </form>
    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="monitoringModal" tabindex="-1" role="dialog" aria-labelledby="monitoringModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="monitoringModalLabel">Создать мониторинг</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>Создание мониторинга с введенными параметрами поиска и сохранением результатов с ценой ниже заданной.
                    <br>Активен 1 неделю.</p>
                <form>
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label for="monitoringPriceLimit">Цена ниже (грн)</label>
                            <input class="form-control" id="monitoringPriceLimit" type="number"
                                   step="1000" name="monitoring-price-limit" value="25800">
                        </div>
                        <div class="form-group col-md-6">
                            <label for="inputAdults">Интервал проверки</label>
                            <select class="form-control" id="monitoringInterval">
                                <option name="interval_1">15 минут</option>
                                <option name="interval_2">30 минут</option>
                                <option name="interval_3" selected>1 час</option>
                                <option name="interval_4">3 часа</option>
                                <option name="interval_5">6 часов</option>
                                <option name="interval_6">8 часов</option>
                            </select>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <span id="monitoringModalMessage">Создание...</span>
                <script>
                    document.getElementById('monitoringModalMessage').style.display = 'none';
                    $(document).on("click", "#monitoringCreateButton", function(event){
                        createMonitoring();
                    });
                </script>
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Отмена</button>
                <button type="button" class="btn btn-primary" id="monitoringCreateButton">Создать</button>
            </div>
        </div>
    </div>
</div>

<div class="container" id="tours-container" style="width: 50vw; margin-bottom: 20px;">
    <div class="card flex-row flex-wrap" style="margin-top: 20px;">
        <div style="width: 300px; height: 200px; left: 0;">
            <div class="border-0">
                <img class="tour-image" src="https://loremflickr.com/300/400" alt="">
            </div>
        </div>
        <div class="card-block px-2 tour-content">
            <a href="/" class="tour-description-item tour-header">ROYAL LAGOONS AQUA PARK RESORT HURGHADA 5 *</a>
            <div class="tour-place">Турция, Кемер</div>
            <div class="tour-description-item">
                <svg style="width:24px;height:24px" viewBox="0 0 24 24">
                    <path fill="#000000" d="M7,10H12V15H7M19,19H5V8H19M19,3H18V1H16V3H8V1H6V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3Z" />
                </svg>
                <span class="tour-description-item-text">21.09</span>
            </div>
            <div class="tour-description-item">
                <svg style="width:24px;height:24px" viewBox="0 0 24 24">
                    <path fill="#000000" d="M17.75,4.09L15.22,6.03L16.13,9.09L13.5,7.28L10.87,9.09L11.78,6.03L9.25,4.09L12.44,4L13.5,1L14.56,4L17.75,4.09M21.25,11L19.61,12.25L20.2,14.23L18.5,13.06L16.8,14.23L17.39,12.25L15.75,11L17.81,10.95L18.5,9L19.19,10.95L21.25,11M18.97,15.95C19.8,15.87 20.69,17.05 20.16,17.8C19.84,18.25 19.5,18.67 19.08,19.07C15.17,23 8.84,23 4.94,19.07C1.03,15.17 1.03,8.83 4.94,4.93C5.34,4.53 5.76,4.17 6.21,3.85C6.96,3.32 8.14,4.21 8.06,5.04C7.79,7.9 8.75,10.87 10.95,13.06C13.14,15.26 16.1,16.22 18.97,15.95M17.33,17.97C14.5,17.81 11.7,16.64 9.53,14.5C7.36,12.31 6.2,9.5 6.04,6.68C3.23,9.82 3.34,14.64 6.35,17.66C9.37,20.67 14.19,20.78 17.33,17.97Z" />
                </svg>
                <span class="tour-description-item-text">6 ночей</span>
            </div>
            <div class="tour-description-item">
                <svg style="width:24px;height:24px" viewBox="0 0 24 24">
                    <path fill="#000000" d="M11,9H9V2H7V9H5V2H3V9C3,11.12 4.66,12.84 6.75,12.97V22H9.25V12.97C11.34,12.84 13,11.12 13,9V2H11V9M16,6V14H18.5V22H21V2C18.24,2 16,4.24 16,6Z" />
                </svg>
                <span class="tour-description-item-text">Только завтраки</span>
            </div>
        </div>
        <div class="w-100"></div>
        <div class="align-middle card-footer w-100 text-muted">
            <a href="#" class="btn btn-dark" style="float: right;">Бронировать</a>
            <h6 class="price-tag">25 800 грн</h6>
        </div>
    </div>
</div>

</body>
</html>